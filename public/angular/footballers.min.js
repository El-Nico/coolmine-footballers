(function(){angular.module("footballers",["ngRoute"]);t.$inject=["$routeProvider","$locationProvider"];function t(t,e){t.when("/",{templateUrl:"/home/home.view.html",controller:"home",controllerAs:"vm"}).when("/about",{templateUrl:"/about/about.view.html"}).when("/adminDashboard",{templateUrl:"/about/about.view.html"}).when("/login",{templateUrl:"/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/admin/register",{templateUrl:"/register/register.view.html",controller:"register",controllerAs:"vm"}).when("/createEvent",{templateUrl:"/createEvent/createEvent.view.html",controller:"createEvent",controllerAs:"vm"}).otherwise({redirectTo:"/"});e.html5Mode({enabled:true,requireBase:false})}angular.module("footballers").config(["$routeProvider","$locationProvider",t])})();(function(){angular.module("footballers").service("authentication",t);t.$inject=["$window","$http"];function t(n,e){var o=function(t){n.localStorage["baller-token"]=t};var i=function(){return n.localStorage["baller-token"]};register=function(t){return e.post("/api/register",t).then(function(t){o(t.data.token)},function t(e){console.log(e+"coming from a failed reg inangualar service auth")})};logout=function(){n.localStorage.removeItem("baller-token")};login=function(t){return e.post("/api/login",t).then(function(t){o(t.data.token)}).catch(function t(e){console.log(e+"coming from a failed login not reg inangualar service auth")})};var r=function(){var t=i();if(t){var e=JSON.parse(n.atob(t.split(".")[1]));return e.exp>Date.now()/1e3}else{return false}};var t=function(){if(r()){var t=i();var e=JSON.parse(n.atob(t.split(".")[1]));return{email:e.email,name:e.name}}};return{saveToken:o,getToken:i,register:register,login:login,logout:logout,isLoggedIn:r,currentUser:t}}})();(function(){angular.module("footballers").directive("navigation",t);function t(){return{restrict:"EA",templateUrl:"/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}})();(function(){angular.module("footballers").controller("navigationCtrl",t);t.$inject=["$location","authentication","$window"];function t(t,e,n){var o=this;o.currentPath=t.path();o.isLoggedIn=e.isLoggedIn();o.currentUser=e.currentUser();o.logout=function(){e.logout();n.location.reload()}}})();(function(){angular.module("footballers").directive("carousel",t);function t(){return{restrict:"EA",templateUrl:"/directives/carousel/carousel.template.html"}}})();(function(){angular.module("footballers").directive("footergen",t);function t(){return{restrict:"EA",templateUrl:"/directives/footergen/footergen.template.html",controller:"footerCtrl as fvm"}}})();(function(){angular.module("footballers").controller("footerCtrl",t);t.$inject=["authentication","$location","$window"];function t(t,e,n){var o=this;o.isLoggedIn=t.isLoggedIn();o.logout=t.logout;o.loginLabel=o.isLoggedIn?"logout":"login as admin";o.handleLabel=function(){if(o.isLoggedIn){o.logout();n.location.reload();return}e.path("/login")}}})();(function(){angular.module("footballers").controller("register",t);t.$inject=["$location","authentication"];function t(t,e){var n=this;n.credentials={name:"",email:"",password:""};n.returnPage=t.search().page||"/";n.onSubmit=function(){}}})();(function(){angular.module("footballers").controller("loginCtrl",t);t.$inject=["$location","authentication"];function t(t,e){var n=this;n.credentials={email:"",password:""};n.returnPage=t.search().page||"/";n.onSubmit=function(){n.formError="";if(!n.credentials.email||!n.credentials.password){n.formError="all fields required";return false}else{n.doLogin()}};n.doLogin=function(){n.formError="";e.login(n.credentials).then(function(){t.search("page",null);t.path(n.returnPage)}).catch(function(t){n.formError=t})}}})();(function(){angular.module("footballers").controller("createEvent",t);t.$inject=["$http","authentication","$location"];function t(t,e,n){var o=this;o.onSubmit=function(){t({url:"/api/home",method:"POST",data:{type:o.type,isNextEvent:o.isNextEvent=="yes",subtitle:o.subtitle,title:o.title,participants:o.participants,details:o.details},headers:{Authorization:"Bearer "+e.getToken()}}).then(function t(e){console.log("positive "+e.data);n.path("/")},function t(e){console.log("negaitve "+e)})}}})();(function(){angular.module("footballers").controller("home",t);t.$inject=["$http","authentication"];function t(t,e){var n=this;n.isLoggedIn=e.isLoggedIn();console.log(n.isLoggedIn);t({method:"GET",url:"/api/home"}).then(function t(e){n.events=e.data;console.log(n.events)},function t(e){console.log("error "+e)})}})();(function(){angular.module("footballers").directive("card",t);function t(){return{restrict:"EA",scope:{event:"=eventdir"},controller:"cardCtrl as cvm",templateUrl:"/directives/card/card.template.html"}}})();(function(){angular.module("footballers").controller("cardCtrl",t);t.$inject=["authentication","$http","$location"];function t(t,e,n){var o=this;o.ran=false;o.storeEvent=function(t){o.ran=true;o.event={type:t.eventType,isNextEvent:t.isNextEvent,title:t.eventTitle,subtitle:t.eventSubtitle,participants:t.eventParticipants,details:t.eventDetails,_id:t._id};o.initialParticipants=o.event.participants;console.log("store ev has run once")};o.isFootball=function(t){return t=="football"};o.editButton="edit";o.isEditing=false;o.editing=function(){if(o.isEditing==false){o.isEditing=true;o.editButton="done"}else{o.isEditing=false;o.editButton="edit";e({url:"/api/home/"+o.event._id,method:"PUT",data:{type:o.event.type,isNextEvent:o.event.isNextEvent,subtitle:o.event.subtitle,title:o.event.title,participants:o.event.participants,details:o.event.details},headers:{Authorization:"Bearer "+t.getToken()}}).then(function t(e){console.log("positive event updated "+e.data)},function t(e){console.log("event not updated "+e)})}};o.isLoggedIn=t.isLoggedIn();o.del=function(){e({url:"/api/home/"+o.event._id,method:"DELETE",headers:{Authorization:"Bearer "+t.getToken()}}).then(function t(e){console.log("positive event deleted "+e.data);n.path("/")},function t(e){console.log("event not deleted "+e)})};o.isRegistering=false;o.registerContent="";o.keypress=function(){o.event.participants=o.initialParticipants+", "+o.registerContent};o.addParticipant=function(){e({url:"/api/home/"+o.event._id+"/addParticipant",method:"PUT",data:{participant:o.registerContent}}).then(function t(e){console.log("positive participant added "+e.data);n.path();o.isRegistering=false},function t(e){console.log("participant not added "+e.data)})};o.dismissRegister=function(){o.isRegistering=false};o.register=function(){o.isRegistering=true}}})();