(function(){angular.module("footballers",["ngRoute"]);e.$inject=["$routeProvider","$locationProvider"];function e(e,t){e.when("/",{templateUrl:"/home/home.view.html",controller:"home",controllerAs:"vm"}).when("/about",{templateUrl:"/about/about.view.html"}).when("/adminDashboard",{templateUrl:"/about/about.view.html"}).when("/login",{templateUrl:"/login/login.view.html",controller:"loginCtrl",controllerAs:"vm"}).when("/admin/register",{templateUrl:"/register/register.view.html",controller:"register",controllerAs:"vm"}).when("/createEvent",{templateUrl:"/createEvent/createEvent.view.html",controller:"createEvent",controllerAs:"vm"}).otherwise({redirectTo:"/"});t.html5Mode({enabled:true,requireBase:false})}angular.module("footballers").config(["$routeProvider","$locationProvider",e])})();(function(){angular.module("footballers").service("authentication",e);e.$inject=["$window","$http"];function e(n,t){var o=function(e){n.localStorage["baller-token"]=e};var i=function(){return n.localStorage["baller-token"]};register=function(e){return t.post("/api/register",e).then(function(e){o(e.data.token)},function e(t){console.log(t+"coming from a failed reg inangualar service auth")})};logout=function(){n.localStorage.removeItem("baller-token")};login=function(e){return t.post("/api/login",e).then(function(e){o(e.data.token)}).catch(function e(t){console.log(t+"coming from a failed login not reg inangualar service auth")})};var r=function(){var e=i();if(e){var t=JSON.parse(n.atob(e.split(".")[1]));return t.exp>Date.now()/1e3}else{return false}};var e=function(){if(r()){var e=i();var t=JSON.parse(n.atob(e.split(".")[1]));return{email:t.email,name:t.name}}};return{saveToken:o,getToken:i,register:register,login:login,logout:logout,isLoggedIn:r,currentUser:e}}})();(function(){angular.module("footballers").directive("navigation",e);function e(){return{restrict:"EA",templateUrl:"/directives/navigation/navigation.template.html",controller:"navigationCtrl as navvm"}}})();(function(){angular.module("footballers").controller("navigationCtrl",e);e.$inject=["$location","authentication","$window"];function e(e,t,n){var o=this;o.currentPath=e.path();o.isLoggedIn=t.isLoggedIn();o.currentUser=t.currentUser();o.logout=function(){t.logout();n.location.reload()}}})();(function(){angular.module("footballers").directive("carousel",e);function e(){return{restrict:"EA",templateUrl:"/directives/carousel/carousel.template.html"}}})();(function(){angular.module("footballers").directive("footergen",e);function e(){return{restrict:"EA",templateUrl:"/directives/footergen/footergen.template.html",controller:"footerCtrl as fvm"}}})();(function(){angular.module("footballers").controller("footerCtrl",e);e.$inject=["authentication","$location","$window"];function e(e,t,n){var o=this;o.isLoggedIn=e.isLoggedIn();o.logout=e.logout;o.loginLabel=o.isLoggedIn?"logout":"login as admin or use email=guest@coolballers.com, password=welcome-guest for admin privileges";o.handleLabel=function(){if(o.isLoggedIn){o.logout();n.location.reload();return}t.path("/login")}}})();(function(){angular.module("footballers").controller("register",e);e.$inject=["$location","authentication"];function e(e,t){var n=this;n.credentials={name:"",email:"",password:""};n.returnPage=e.search().page||"/";n.onSubmit=function(){}}})();(function(){angular.module("footballers").controller("loginCtrl",e);e.$inject=["$location","authentication"];function e(e,t){var n=this;n.credentials={email:"",password:""};n.returnPage=e.search().page||"/";n.onSubmit=function(){n.formError="";if(!n.credentials.email||!n.credentials.password){n.formError="all fields required";return false}else{n.doLogin()}};n.doLogin=function(){n.formError="";t.login(n.credentials).then(function(){e.search("page",null);e.path(n.returnPage)}).catch(function(e){n.formError=e})}}})();(function(){angular.module("footballers").controller("createEvent",e);e.$inject=["$http","authentication","$location"];function e(e,t,n){var o=this;o.onSubmit=function(){e({url:"/api/home",method:"POST",data:{type:o.type,isNextEvent:o.isNextEvent=="yes",subtitle:o.subtitle,title:o.title,participants:o.participants,details:o.details},headers:{Authorization:"Bearer "+t.getToken()}}).then(function e(t){console.log("positive "+t.data);n.path("/")},function e(t){console.log("negaitve "+t)})}}})();(function(){angular.module("footballers").controller("home",e);e.$inject=["$http","authentication"];function e(e,t){var n=this;n.isLoggedIn=t.isLoggedIn();console.log(n.isLoggedIn);e({method:"GET",url:"/api/home"}).then(function e(t){n.events=t.data;console.log(n.events)},function e(t){console.log("error "+t)})}})();(function(){angular.module("footballers").directive("card",e);function e(){return{restrict:"EA",scope:{event:"=eventdir"},controller:"cardCtrl as cvm",templateUrl:"/directives/card/card.template.html"}}})();(function(){angular.module("footballers").controller("cardCtrl",e);e.$inject=["authentication","$http","$location"];function e(e,t,n){var o=this;o.ran=false;o.storeEvent=function(e){o.ran=true;o.event={type:e.eventType,isNextEvent:e.isNextEvent,title:e.eventTitle,subtitle:e.eventSubtitle,participants:e.eventParticipants,details:e.eventDetails,_id:e._id};o.initialParticipants=o.event.participants;console.log("store ev has run once")};o.isFootball=function(e){return e=="football"};o.editButton="edit";o.isEditing=false;o.editing=function(){if(o.isEditing==false){o.isEditing=true;o.editButton="done"}else{o.isEditing=false;o.editButton="edit";t({url:"/api/home/"+o.event._id,method:"PUT",data:{type:o.event.type,isNextEvent:o.event.isNextEvent,subtitle:o.event.subtitle,title:o.event.title,participants:o.event.participants,details:o.event.details},headers:{Authorization:"Bearer "+e.getToken()}}).then(function e(t){console.log("positive event updated "+t.data)},function e(t){console.log("event not updated "+t)})}};o.isLoggedIn=e.isLoggedIn();o.del=function(){t({url:"/api/home/"+o.event._id,method:"DELETE",headers:{Authorization:"Bearer "+e.getToken()}}).then(function e(t){console.log("positive event deleted "+t.data);n.path("/")},function e(t){console.log("event not deleted "+t)})};o.isRegistering=false;o.registerContent="";o.keypress=function(){o.event.participants=o.initialParticipants+", "+o.registerContent};o.addParticipant=function(){t({url:"/api/home/"+o.event._id+"/addParticipant",method:"PUT",data:{participant:o.registerContent}}).then(function e(t){console.log("positive participant added "+t.data);n.path();o.isRegistering=false},function e(t){console.log("participant not added "+t.data)})};o.dismissRegister=function(){o.isRegistering=false};o.register=function(){o.isRegistering=true}}})();